import pickle
import numpy as np

def predict_single(game, dv, model):
    X = dv.transform([game])
    y_pred = model.predict_proba(X)[:, 1]
    return y_pred[0]


with open ('win-model.bin', 'rb') as f_in:
    dv, model = pickle.load(f_in)

game = {
 'GAME_ID': 20200684.0,
 'GAME_DATE': 731249.0,
 'HOME_TEAM_ID': 1610612748.0,
 'HOME_WL': 1.0,
 'AWAY_AST_PCT': 0.4702999999999999,
 'AWAY_AST_PCT_RANK': 1915.4,
 'AWAY_AST_RATIO': 12.865,
 'AWAY_AST_RATIO_RANK': 1882.65,
 'AWAY_AST_TO': 1.0059999999999998,
 'AWAY_AST_TO_RANK': 1930.65,
 'AWAY_DEF_RATING': 99.755,
 'AWAY_DEF_RATING_RANK': 1075.3,
 'AWAY_DREB_PCT': 0.68955,
 'AWAY_DREB_PCT_RANK': 1139.95,
 'AWAY_EFG_PCT': 0.4803,
 'AWAY_EFG_PCT_RANK': 1145.15,
 'AWAY_E_DEF_RATING': 98.77,
 'AWAY_E_NET_RATING': -0.2700000000000028,
 'AWAY_E_OFF_RATING': 98.5,
 'AWAY_E_PACE': 89.22,
 'AWAY_FTA_RATE': 0.39635,
 'AWAY_FTA_RATE_RANK': 709.65,
 'AWAY_GP_RANK': 1.0,
 'AWAY_L_RANK': 595.5,
 'AWAY_MIN': 48.75,
 'AWAY_MIN_RANK': 156.6,
 'AWAY_NET_RATING': 0.2699999999999988,
 'AWAY_NET_RATING_RANK': 1174.3,
 'AWAY_OFF_RATING': 100.03,
 'AWAY_OFF_RATING_RANK': 1294.1,
 'AWAY_OPP_EFG_PCT': 0.4603499999999999,
 'AWAY_OPP_EFG_PCT_RANK': 1094.8,
 'AWAY_OPP_FTA_RATE': 0.26025,
 'AWAY_OPP_FTA_RATE_RANK': 913.0,
 'AWAY_OPP_OREB_PCT': 0.31045,
 'AWAY_OPP_OREB_PCT_RANK': 1139.95,
 'AWAY_OPP_TOV_PCT': 0.14395,
 'AWAY_OPP_TOV_PCT_RANK': 1480.2,
 'AWAY_OREB_PCT': 0.2857,
 'AWAY_OREB_PCT_RANK': 1438.9,
 'AWAY_PACE': 88.0565,
 'AWAY_PACE_PER40': 73.381,
 'AWAY_PACE_RANK': 1806.8,
 'AWAY_PCT_AST_2PM': 0.3956499999999999,
 'AWAY_PCT_AST_2PM_RANK': 1975.65,
 'AWAY_PCT_AST_3PM': 0.8713000000000001,
 'AWAY_PCT_AST_3PM_RANK': 820.6,
 'AWAY_PCT_AST_FGM': 0.4702999999999999,
 'AWAY_PCT_AST_FGM_RANK': 1915.4,
 'AWAY_PCT_FGA_2PT': 0.8036,
 'AWAY_PCT_FGA_2PT_RANK': 1299.7,
 'AWAY_PCT_FGA_3PT': 0.1964,
 'AWAY_PCT_FGA_3PT_RANK': 1073.4,
 'AWAY_PCT_PTS_2PT': 0.5963499999999999,
 'AWAY_PCT_PTS_2PT_MR': 0.2298,
 'AWAY_PCT_PTS_2PT_MR_RANK': 1360.8,
 'AWAY_PCT_PTS_2PT_RANK': 1528.3,
 'AWAY_PCT_PTS_3PT': 0.17015,
 'AWAY_PCT_PTS_3PT_RANK': 1059.35,
 'AWAY_PCT_PTS_FB': 0.1129999999999999,
 'AWAY_PCT_PTS_FB_RANK': 1371.7,
 'AWAY_PCT_PTS_FT': 0.23335,
 'AWAY_PCT_PTS_FT_RANK': 834.15,
 'AWAY_PCT_PTS_OFF_TOV': 0.1488999999999999,
 'AWAY_PCT_PTS_OFF_TOV_RANK': 1456.05,
 'AWAY_PCT_PTS_PAINT': 0.3668,
 'AWAY_PCT_PTS_PAINT_RANK': 1382.4,
 'AWAY_PCT_UAST_2PM': 0.6043999999999999,
 'AWAY_PCT_UAST_2PM_RANK': 392.7,
 'AWAY_PCT_UAST_3PM': 0.1286999999999999,
 'AWAY_PCT_UAST_3PM_RANK': 881.6,
 'AWAY_PCT_UAST_FGM': 0.5297499999999999,
 'AWAY_PCT_UAST_FGM_RANK': 449.9,
 'AWAY_PIE': 0.49485,
 'AWAY_PIE_RANK': 1230.2,
 'AWAY_POSS': 89.25,
 'AWAY_REB_PCT': 0.4979,
 'AWAY_REB_PCT_RANK': 1152.9,
 'AWAY_TEAM_ID': 1610612749.85,
 'AWAY_TM_TOV_PCT': 0.18735,
 'AWAY_TM_TOV_PCT_RANK': 1551.8,
 'AWAY_TS_PCT': 0.533,
 'AWAY_TS_PCT_RANK': 1091.45,
 'AWAY_W_PCT_RANK': 595.5,
 'AWAY_W_RANK': 595.5,
 'HOME_AST_PCT': 0.53205,
 'HOME_AST_PCT_RANK': 1672.75,
 'HOME_AST_RATIO': 14.919999999999998,
 'HOME_AST_RATIO_RANK': 1572.2,
 'HOME_AST_TO': 1.5125,
 'HOME_AST_TO_RANK': 1213.45,
 'HOME_DEF_RATING': 100.03,
 'HOME_DEF_RATING_RANK': 1076.75,
 'HOME_DREB_PCT': 0.7142999999999999,
 'HOME_DREB_PCT_RANK': 930.55,
 'HOME_EFG_PCT': 0.4603499999999999,
 'HOME_EFG_PCT_RANK': 1276.9,
 'HOME_E_DEF_RATING': 98.5,
 'HOME_E_NET_RATING': 0.2700000000000028,
 'HOME_E_OFF_RATING': 98.77,
 'HOME_E_PACE': 89.22,
 'HOME_FTA_RATE': 0.26025,
 'HOME_FTA_RATE_RANK': 1461.65,
 'HOME_GP_RANK': 1.0,
 'HOME_L_RANK': 595.5,
 'HOME_MIN': 48.75,
 'HOME_MIN_RANK': 156.6,
 'HOME_NET_RATING': -0.2699999999999988,
 'HOME_NET_RATING_RANK': 1204.4,
 'HOME_OFF_RATING': 99.755,
 'HOME_OFF_RATING_RANK': 1299.4,
 'HOME_OPP_EFG_PCT': 0.4803,
 'HOME_OPP_EFG_PCT_RANK': 1232.45,
 'HOME_OPP_FTA_RATE': 0.39635,
 'HOME_OPP_FTA_RATE_RANK': 1666.0,
 'HOME_OPP_OREB_PCT': 0.2857,
 'HOME_OPP_OREB_PCT_RANK': 930.55,
 'HOME_OPP_TOV_PCT': 0.18735,
 'HOME_OPP_TOV_PCT_RANK': 819.2,
 'HOME_OREB_PCT': 0.31045,
 'HOME_OREB_PCT_RANK': 1221.75,
 'HOME_PACE': 88.0565,
 'HOME_PACE_PER40': 73.381,
 'HOME_PACE_RANK': 1806.8,
 'HOME_PCT_AST_2PM': 0.47695,
 'HOME_PCT_AST_2PM_RANK': 1679.6,
 'HOME_PCT_AST_3PM': 0.8681499999999998,
 'HOME_PCT_AST_3PM_RANK': 823.35,
 'HOME_PCT_AST_FGM': 0.53205,
 'HOME_PCT_AST_FGM_RANK': 1672.75,
 'HOME_PCT_FGA_2PT': 0.8228,
 'HOME_PCT_FGA_2PT_RANK': 1157.55,
 'HOME_PCT_FGA_3PT': 0.1772,
 'HOME_PCT_FGA_3PT_RANK': 1216.0,
 'HOME_PCT_PTS_2PT': 0.6570500000000001,
 'HOME_PCT_PTS_2PT_MR': 0.2867,
 'HOME_PCT_PTS_2PT_MR_RANK': 836.45,
 'HOME_PCT_PTS_2PT_RANK': 1085.35,
 'HOME_PCT_PTS_3PT': 0.16765,
 'HOME_PCT_PTS_3PT_RANK': 1068.95,
 'HOME_PCT_PTS_FB': 0.0827,
 'HOME_PCT_PTS_FB_RANK': 1757.0,
 'HOME_PCT_PTS_FT': 0.1753,
 'HOME_PCT_PTS_FT_RANK': 1392.4,
 'HOME_PCT_PTS_OFF_TOV': 0.2059,
 'HOME_PCT_PTS_OFF_TOV_RANK': 829.6,
 'HOME_PCT_PTS_PAINT': 0.3705,
 'HOME_PCT_PTS_PAINT_RANK': 1447.3,
 'HOME_PCT_UAST_2PM': 0.52305,
 'HOME_PCT_UAST_2PM_RANK': 670.6,
 'HOME_PCT_UAST_3PM': 0.1318499999999999,
 'HOME_PCT_UAST_3PM_RANK': 876.4,
 'HOME_PCT_UAST_FGM': 0.46795,
 'HOME_PCT_UAST_FGM_RANK': 691.35,
 'HOME_PIE': 0.50515,
 'HOME_PIE_RANK': 1148.7,
 'HOME_POSS': 89.6,
 'HOME_REB_PCT': 0.5021,
 'HOME_REB_PCT_RANK': 1206.95,
 'HOME_TM_TOV_PCT': 0.14395,
 'HOME_TM_TOV_PCT_RANK': 888.35,
 'HOME_TS_PCT': 0.50125,
 'HOME_TS_PCT_RANK': 1368.85,
 'HOME_W_PCT_RANK': 595.5,
 'HOME_W_RANK': 595.5
}

prediction = predict_single(game, dv, model)

print ('prediction: %.3f' % prediction)

if prediction >= 0.6:
    print('Result: Win')
else:
    print('Result: Loss')